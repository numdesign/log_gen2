<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>챗챈 로그 제조기 (V1.3)</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="light-mode">
    <div class="container">
      <h1>챗챈 로그 제조기 (V1.3)</h1>

      <div class="theme-toggle-section">
        <label for="themeToggleCheckbox" class="toggle-switch-label" title="화면 전체의 라이트/다크 모드를 전환합니다.">
          <input type="checkbox" id="themeToggleCheckbox" />
          <span class="toggle-switch-slider"></span>
          <span class="toggle-switch-text" id="themeToggleText">라이트 모드</span>
        </label>
        <button id="resetAllButton" class="danger-button" title="모든 입력 내용과 설정을 초기화합니다 (프리셋 제외)">
          전체 초기화
        </button>
      </div>

      <details class="section" open title="기본적인 캐릭터, 모델, 사용자 정보를 입력하는 곳입니다.">
        <summary>캐릭터 정보 설정</summary>
        <div class="section-content">
          <div class="input-group">
            <div>
              <label for="characterName">캐릭터 이름</label>
              <input type="text" id="characterName" placeholder="캐릭터 이름" title="AI 캐릭터 이름" />
            </div>
            <div>
              <label for="modelName">AI 모델명</label>
              <input type="text" id="modelName" list="modelNameList" placeholder="모델명 선택 또는 직접 입력" title="사용한 AI 모델 이름" />
              <datalist id="modelNameList">
                <option value="GPT-4o ChatGPT"></option>
                <option value="GPT-4.5"></option>
                <option value="Claude 3.7 Sonnet"></option>
                <option value="Gemini pro 2.5"></option>
                <option value="Gemini flash 2.0"></option>
              </datalist>
            </div>
          </div>
          <div class="input-group">
            <div>
              <label for="promptName">프롬프트명</label>
              <input type="text" id="promptName" placeholder="프롬프트명" title="사용한 프롬프트 이름" />
            </div>
            <div>
              <label for="assistModelName">보조 모델명</label>
              <input type="text" id="assistModelName" list="assistModelNameList" placeholder="보조 모델명 선택 또는 직접 입력" title="사용한 보조 모델 이름" />
              <datalist id="assistModelNameList">
                <option value="GPT-4o ChatGPT"></option>
                <option value="GPT-4.5"></option>
                <option value="Claude 3.7 Sonnet"></option>
                <option value="Gemini pro 2.5"></option>
                <option value="Gemini flash 2.0"></option>
              </datalist>
            </div>
          </div>
          <div class="input-group">
            <div>
              <label for="userName">유저 이름</label>
              <input type="text" id="userName" placeholder="유저 이름 (기본값: USER)" title="사용자 이름" />
            </div>
            <div>
              <label for="chatNumber">채팅 번호</label>
              <input type="text" id="chatNumber" placeholder="채팅 번호 (기본값: 랜덤)" title="채팅 번호" />
            </div>
          </div>
          <div class="input-group">
            <label for="characterImageUrl">캐릭터 이미지 URL (선택)</label>
            <input type="text" id="characterImageUrl" placeholder="https://example.com/image.png" title="로그 상단 표시 이미지 URL" />
          </div>
          <div class="input-group align-center" style="margin-bottom: 0; justify-content: flex-start;">
            <div>
              <label for="noCharacterImageToggle" class="toggle-switch-label small-toggle" title="체크 시 캐릭터 이미지를 로그에 표시하지 않고, URL 입력란을 비활성화합니다.">
                <input type="checkbox" id="noCharacterImageToggle">
                <span class="toggle-switch-slider"></span>
                <span class="toggle-switch-text">캐릭터 이미지 사용 안 함</span>
              </label>
            </div>
          </div>
        </div>
      </details>

      <details class="section">
        <summary>디자인 및 스타일 설정</summary>
        <div class="section-content">
          <div>
            <label title="미리 정의된 색상 조합으로 빠르게 스타일을 변경합니다.">컬러 테마</label>
            <div class="color-theme-buttons">
              <button class="theme-btn" data-theme="ocean_blue" style="background-color: #2980b9" title="Ocean Blue 테마">Ocean</button>
              <button class="theme-btn" data-theme="forest_green" style="background-color: #27ae60" title="Forest Green 테마">Forest</button>
              <button class="theme-btn" data-theme="royal_purple" style="background-color: #8e44ad" title="Royal Purple 테마">Purple</button>
              <button class="theme-btn" data-theme="sunset_orange" style="background-color: #e67e22" title="Sunset Orange 테마">Sunset</button>
              <button class="theme-btn" data-theme="ruby_red" style="background-color: #c0392b" title="Ruby Red 테마">Ruby</button>
              <button class="theme-btn" data-theme="teal_green" style="background-color: #16a085" title="Teal Green 테마">Teal</button>
              <button class="theme-btn" data-theme="graphite" style="background-color: #566573" title="Graphite 테마">Graphite</button>
              <button class="theme-btn" data-theme="indigo_amber" style="background-color: #34495e" title="Indigo & Amber 테마">Indigo</button>
              <button class="theme-btn" data-theme="lavender_mint" style="background-color: #9b59b6" title="Lavender & Mint 테마">Lavender</button>
              <button class="theme-btn" data-theme="rose_plum" style="background-color: #d9534f" title="Rose & Plum 테마">Rose</button>
            </div>
          </div>
          <div>
            <label>스타일 상세 설정</label>
            <div class="input-group">
              <div>
                <label class="style-config-label">로그 배경 색상</label>
                <div class="color-input-group">
                  <input type="color" id="backgroundColor" title="로그 배경 색상 선택" />
                  <input type="text" id="backgroundColorText" title="로그 배경 색상 입력" />
                </div>
              </div>
              <div>
                <label class="style-config-label">로그 글자 색상</label>
                <div class="color-input-group">
                  <input type="color" id="textColor" title="로그 글자 색상 선택" />
                  <input type="text" id="textColorText" title="로그 글자 색상 입력" />
                </div>
              </div>
            </div>
            <div class="color-settings-grid">
              <div>
                <label class="style-config-label">하이라이트 색상 1</label>
                <div class="color-input-group">
                  <input type="color" id="highlightColor" title="^텍스트^, 모델명 배경색 선택" />
                  <input type="text" id="highlightColorText" title="하이라이트 배경색 입력" />
                </div>
              </div>
              <div>
                <label class="style-config-label">하이라이트 색상 2</label>
                <div class="color-input-group">
                  <input type="color" id="promptColor" title="프롬프트명 배경색 선택" />
                  <input type="text" id="promptColorText" title="프롬프트 배경색 입력" />
                </div>
              </div>
              <div>
                <label class="style-config-label">하이라이트 색상 3</label>
                <div class="color-input-group">
                  <input type="color" id="emphasisColor" title="$텍스트$, 보조 모델명 배경색 선택" />
                  <input type="text" id="emphasisColorText" title="강조 배경색 입력" />
                </div>
              </div>
            </div>
            <div class="input-group" style="margin-top: 15px">
              <div>
                <label class="style-config-label" for="baseFontSize">글자 크기 (px)</label>
                <input type="number" id="baseFontSize" min="10" max="30" value="15" step="1" title="로그 본문 글자 크기(기본값:15px)" />
              </div>
              <div>
                <label class="style-config-label" for="titleFontSize">제목 글자 크기 (px)</label>
                <input type="number" id="titleFontSize" min="20" max="60" value="38" step="1" title="로그 제목 글자 크기(기본값:38px)" />
              </div>
              <div>
                <label class="style-config-label" for="containerWidth">컨테이너 너비 (px)</label>
                <input type="number" id="containerWidth" min="300" max="1500" value="650" step="10" title="생성 로그 최대 너비 (기본값:650px)" />
              </div>
              <div>
                <label class="style-config-label" for="logSectionRadius">로그 섹션 모서리 (px)</label>
                <input type="number" id="logSectionRadius" min="0" max="50" value="12" step="1" title="로그 섹션의 모서리 둥글기(기본값: 12px)" />
              </div>
              <div>
                <label class="style-config-label" for="lineHeight">줄 간격 (배수)</label>
                <input type="number" id="lineHeight" min="1" max="3" value="1.6" step="0.1" title="채팅 내용 줄 간격 (기본값: 1.6)" />
              </div>
              <div>
                <label class="style-config-label" for="letterSpacing">자간 (em)</label>
                <input type="number" id="letterSpacing" min="-0.5" max="1" value="0" step="0.01" title="채팅 내용 글자 간격 (기본값: -0.05)" />
              </div>
            </div>
            <div class="additional-options-box">
              <label class="style-config-label" style="font-weight: 600; color: var(--label-color); margin-bottom: 10px;">추가 스타일 및 출력 옵션</label>
              <div class="toggle-grid">
                <div class="input-group align-center">
                  <div>
                    <label for="italicizeNarration" class="toggle-switch-label small-toggle" title="나레이션 텍스트를 이탤릭체로 표시할지 여부">
                      <input type="checkbox" id="italicizeNarration" checked />
                      <span class="toggle-switch-slider"></span>
                      <span class="toggle-switch-text">나레이션 기울임꼴</span>
                    </label>
                  </div>
                </div>
                <div class="input-group align-center">
                  <div>
                    <label for="simpleOutputMode" class="toggle-switch-label small-toggle" title="체크 시 캐릭터 정보 헤더를 제외하고 채팅 로그 부분만 생성합니다">
                      <input type="checkbox" id="simpleOutputMode" />
                      <span class="toggle-switch-slider"></span>
                      <span class="toggle-switch-text">채팅 로그만 출력</span>
                    </label>
                  </div>
                </div>
                <div class="input-group align-center">
                  <div>
                    <label for="disableChatLogCollapse" class="toggle-switch-label small-toggle" title="체크 시 채팅 로그 섹션이 접히지 않습니다">
                      <input type="checkbox" id="disableChatLogCollapse" />
                      <span class="toggle-switch-slider"></span>
                      <span class="toggle-switch-text">로그 접기 비활성화</span>
                    </label>
                  </div>
                </div>
                <div class="input-group align-center">
                  <div>
                    <label for="inputModeToggle" class="toggle-switch-label small-toggle" title="체크 시 자동으로 채팅 내역을 인식해 로그를 생성합니다">
                      <input type="checkbox" id="inputModeToggle" />
                      <span class="toggle-switch-slider"></span>
                      <span class="toggle-switch-text">딸깍 모드
                        <span class="toggle-text-off" style="font-weight: bold">풀사칭용</span>
                        <span class="toggle-text-on" style="font-weight: bold">사칭방지용</span>
                      </span>
                    </label>
                  </div>
                </div>
                <div class="input-group align-center">
                  <div>
                    <label for="dialogueBubbleToggle" class="toggle-switch-label small-toggle" title="체크 시 AI와 USER의 대사를 말풍선 형태로 표시합니다">
                      <input type="checkbox" id="dialogueBubbleToggle" checked />
                      <span class="toggle-switch-slider"></span>
                      <span class="toggle-switch-text">대사에 말풍선 사용</span>
                    </label>
                  </div>
                </div>
                <div class="input-group align-center">
                  <div>
                    <label for="narrationLineToggle" class="toggle-switch-label small-toggle" title="체크 시 나레이션 왼쪽에 인용선(세로선)을 표시합니다">
                      <input type="checkbox" id="narrationLineToggle" checked />
                      <span class="toggle-switch-slider"></span>
                      <span class="toggle-switch-text">나레이션에 인용선 사용</span>
                    </label>
                  </div>
                </div>
                <div class="input-group align-center">
                  <div>
                    <label for="showBriefHeaderInfo" class="toggle-switch-label small-toggle" title="체크 시 채팅 번호 옆에 모델/프롬프트 정보를 간략히 표시합니다">
                      <input type="checkbox" id="showBriefHeaderInfo" />
                      <span class="toggle-switch-slider"></span>
                      <span class="toggle-switch-text">모델 정보 헤더에 표시</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="preset-manager">
            <label>설정 프리셋 관리</label>
            <div class="preset-controls">
              <div>
                <label for="presetName" class="style-config-label">프리셋 이름</label>
                <input type="text" id="presetName" placeholder="저장할 프리셋 이름 입력" />
              </div>
              <button id="savePresetBtn" class="info-button">프리셋 저장</button>
            </div>
            <div class="preset-controls">
              <select id="presetList">
                <option value="">-- 프리셋 선택 --</option>
              </select>
              <button id="loadPresetBtn" class="secondary-button">불러오기</button>
              <button id="deletePresetBtn" class="danger-button">삭제</button>
            </div>
          </div>
        </div>
      </details>

      <details class="section" open>
        <summary>채팅 내용 입력</summary>
        <div class="section-content">
          <div class="format-guide-container" id="formatGuide">
            <strong>입력 형식 안내 (<span id="guideInputMode">풀사칭용</span>)</strong>
            <span id="guidePrefix" style="display: block">
              - 나레이션: <code>-</code> 또는 <code>*</code> 로 시작<br />
              - 대화: <code>USER:</code> 또는 <code>AI:</code> 로 시작<br />
              - 예: <code>- 조용한 밤.</code><br />
              - 예: <code>USER: 안녕?</code><br />
            </span>
            <span id="guideAuto" style="display: none">
              - 대사: <code>"큰따옴표"</code> 또는 <code>“둥근따옴표”</code> 로 감싸기<br />
              - 나레이션: 따옴표 없이 입력<br />
              - 예: <code>"안녕?"</code><br />
              - 예: <code>USER가 인사했다.</code><br />
            </span>
            <span>
              - 빈 줄은 무시됩니다.<br />
              <strong>마크다운 강조:</strong> (툴바 또는 단축키 사용)<br />
              &nbsp;&nbsp;<code>**굵게**</code> &rarr; <strong>굵은 글씨</strong> <br />
              &nbsp;&nbsp;<code>*기울임*</code> &rarr; <em style="font-style: italic">이탤릭체</em> <br />
              &nbsp;&nbsp;<code>***굵은기울임***</code> &rarr; <strong><em style="font-style: italic">굵은 이탤릭체</em></strong><br />
              &nbsp;&nbsp;<code>^하이라이트^</code> &rarr; <span class="highlight-example" id="guideHighlightExample">하이라이트</span><br />
              &nbsp;&nbsp;<code>$강조$</code> &rarr; <span class="emphasis-example" id="guideEmphasisExample">강 조</span>
            </span>
          </div>
          <div id="chatSectionsContainer">
            <div class="section chat-section">
              <div class="section-header">
                <label>채팅 입력</label>
                <div class="section-controls">
                  <button type="button" class="move-btn move-up" title="위로 이동" disabled>▲</button>
                  <button type="button" class="move-btn move-down" title="아래로 이동">▼</button>
                  <button type="button" class="danger-button remove-section-btn" title="채팅 입력 섹션 삭제" disabled>X</button>
                </div>
              </div>
              <div class="markdown-toolbar">
                <button type="button" class="format-btn" data-narration="true" title="나레이션 (Ctrl+Alt+1)">나레이션<kbd>Ctrl+Alt+1</kbd></button>
                <button type="button" class="format-btn" data-speaker="AI" title="AI 대사 (Ctrl+Alt+2)">AI<kbd>Ctrl+Alt+2</kbd></button>
                <button type="button" class="format-btn" data-speaker="USER" title="USER 대사 (Ctrl+Alt+3)">USER<kbd>Ctrl+Alt+3</kbd></button>
                <span class="toolbar-divider"></span>
                <button type="button" class="markdown-btn" data-type="bold" title="굵게 (Ctrl+B)"><b>B</b><kbd>Ctrl+B</kbd></button>
                <button type="button" class="markdown-btn" data-type="italic" title="기울임 (Ctrl+I)"><i>I</i><kbd>Ctrl+I</kbd></button>
                <button type="button" class="markdown-btn" data-type="boldItalic" title="굵은 기울임"><b><i>BI</i></b></button>
                <button type="button" class="markdown-btn" data-type="highlight" title="하이라이트 적용 (^텍스트^) (Ctrl+H)">하이라이트<kbd>Ctrl+H</kbd></button>
                <button type="button" class="markdown-btn" data-type="emphasis" title="강조 적용 ($텍스트$) (Ctrl+E)">강조<kbd>Ctrl+E</kbd></button>
              </div>
              <textarea id="chatInput_default" class="full-width chat-input-area" placeholder="- 화창한 봄날, 공원에서 우연히 만난 두 사람은..." title="채팅 내용 입력 (자동 저장됨)"></textarea>
            </div>
          </div>
          <button id="addChatSectionBtn" class="secondary-button" title="채팅 입력 영역 추가" style="margin-top: 10px">채팅 섹션 추가</button>
        </div>
      </details>

      <div class="action-buttons">
        <button id="generateButton" class="primary-button" title="HTML 생성 및 미리보기 업데이트">HTML 생성하기</button>
        <button id="loadExampleBtn" class="info-button" title="예시 텍스트 불러오기 (기존 내용 덮어씀)">예제 불러오기</button>
        <button id="copyButton" class="secondary-button" title="생성된 HTML 코드 복사">HTML 복사하기</button>
      </div>

      <div class="section" style="margin-top: 20px">
        <label for="htmlOutput">HTML 결과</label>
        <textarea id="htmlOutput" class="full-width" title="생성된 HTML 코드입니다." readonly></textarea>
      </div>

      <div>
        <h2>미리보기</h2>
        <div id="previewArea" class="preview-area" title="생성된 HTML 미리보기">
          미리보기 영역입니다. 'HTML 생성하기' 버튼을 눌러주세요.
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
